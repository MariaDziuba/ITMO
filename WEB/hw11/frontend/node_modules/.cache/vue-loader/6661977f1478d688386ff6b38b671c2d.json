{"remainingRequest":"/Users/maria/Desktop/hw11/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maria/Desktop/hw11/frontend/src/components/middle/FullPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/maria/Desktop/hw11/frontend/src/components/middle/FullPost.vue","mtime":1579039094000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNaWRkbGVQb3N0IGZyb20gIi4vTWlkZGxlUG9zdCI7CmltcG9ydCBDb21tZW50IGZyb20gIi4uL2NvbW1vbi9Db21tZW50IjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkZ1bGxQb3N0IiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBNaWRkbGVQb3N0LAogICAgICAgIENvbW1lbnQKICAgIH0sCiAgICBwcm9wczogWydwb3N0JywgJ3VzZXInXSwKICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZW5kZXJDb21tZW50czogdHJ1ZSwKICAgICAgICAgICAgYWRkaW5nQ29tbWVudDogZmFsc2UsCiAgICAgICAgICAgIGNvbW1lbnRUZXh0OiAiIiwKICAgICAgICAgICAgY29tbWVudHM6IFtdCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvbkFkZENvbW1lbnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5hZGRpbmdDb21tZW50ID0gdHJ1ZTsKCiAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9wb3N0LyIgKyB0aGlzLnBvc3QuaWQsIHsKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuY29tbWVudFRleHQsCiAgICAgICAgICAgIH0pLnRoZW4oCiAgICAgICAgICAgICAgICB0aGlzLmdldENvbW1lbnRzCiAgICAgICAgICAgICkudGhlbih0aGlzLmhpZGVDb21tZW50cykudGhlbih0aGlzLnNob3dDb21tZW50cyk7CgogICAgICAgICAgICB0aGlzLmFkZGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5jb21tZW50VGV4dCA9ICIiOwogICAgICAgIH0sCiAgICAgICAgaGlkZUNvbW1lbnRzKCkgewogICAgICAgICAgICB0aGlzLnJlbmRlckNvbW1lbnRzID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBzaG93Q29tbWVudHMoKSB7CiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tbWVudHMgPSB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGdldENvbW1lbnRzKCkgewogICAgICAgICAgICBheGlvcy5nZXQoIi9hcGkvMS9jb21tZW50cy8iICsgdGhpcy5wb3N0LmlkKS50aGVuKAogICAgICAgICAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0sCiAgICBiZWZvcmVNb3VudCgpIHsKICAgICAgICB0aGlzLmdldENvbW1lbnRzKCk7CiAgICB9Cn0K"},{"version":3,"sources":["FullPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FullPost.vue","sourceRoot":"src/components/middle","sourcesContent":["<template>\n    <div class=\"full-post\">\n        <MiddlePost :post=\"post\"/>\n\n        <form v-if=\"user\" class=\"comment-form\" @submit.prevent=\"onAddComment\">\n            <div>\n                <h3>Add comment</h3>\n                <textarea id=\"text\" rows=\"20\" v-model=\"commentText\"></textarea>\n            </div>\n            <div class=\"error\">{{error}}</div>\n            <div>\n                <input :disabled=\"addingComment\" type=\"submit\" value=\"Add\"/>\n            </div>\n\n        </form>\n\n        <div v-if=\"renderComments\" class=\"comments\">\n            <h3 v-if=\"comments.length\">Comments: </h3>\n            <Comment v-for=\"comment in comments\" :key=\"comment.id\"\n                     :comment=\"comment\"></Comment>\n        </div>\n    </div>\n</template>\n\n<script>\n    import MiddlePost from \"./MiddlePost\";\n    import Comment from \"../common/Comment\";\n    import axios from 'axios'\n\n    export default {\n        name: \"FullPost\",\n        components: {\n            MiddlePost,\n            Comment\n        },\n        props: ['post', 'user'],\n        data: function () {\n            return {\n                renderComments: true,\n                addingComment: false,\n                commentText: \"\",\n                comments: []\n            }\n        },\n        methods: {\n            onAddComment: function () {\n                this.addingComment = true;\n\n                axios.post(\"/api/1/post/\" + this.post.id, {\n                    text: this.commentText,\n                }).then(\n                    this.getComments\n                ).then(this.hideComments).then(this.showComments);\n\n                this.addingComment = false;\n                this.commentText = \"\";\n            },\n            hideComments() {\n                this.renderComments = false;\n            },\n            showComments() {\n                this.$nextTick(() => {\n                    this.renderComments = true;\n                });\n            },\n            getComments() {\n                axios.get(\"/api/1/comments/\" + this.post.id).then(\n                    response => {\n                        this.comments = response.data;\n                    }\n                );\n            }\n        },\n        beforeMount() {\n            this.getComments();\n        }\n    }\n</script>\n\n<style scoped>\n    h3 {\n        color: #3B5998;\n    }\n\n    .comment-form textarea {\n        width: 15rem;\n        height: 2rem;\n    }\n</style>\n"]}]}