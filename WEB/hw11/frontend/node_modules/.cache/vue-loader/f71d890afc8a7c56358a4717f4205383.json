{"remainingRequest":"/Users/maria/Desktop/hw11/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maria/Desktop/hw11/frontend/src/components/middle/FullPost.vue?vue&type=style&index=0&id=3fcaf8c9&scoped=true&lang=css&","dependencies":[{"path":"/Users/maria/Desktop/hw11/frontend/src/components/middle/FullPost.vue","mtime":1579039094000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maria/Desktop/hw11/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpoMyB7CiAgICBjb2xvcjogIzNCNTk5ODsKfQoKLmNvbW1lbnQtZm9ybSB0ZXh0YXJlYSB7CiAgICB3aWR0aDogMTVyZW07CiAgICBoZWlnaHQ6IDJyZW07Cn0K"},{"version":3,"sources":["FullPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"FullPost.vue","sourceRoot":"src/components/middle","sourcesContent":["<template>\n    <div class=\"full-post\">\n        <MiddlePost :post=\"post\"/>\n\n        <form v-if=\"user\" class=\"comment-form\" @submit.prevent=\"onAddComment\">\n            <div>\n                <h3>Add comment</h3>\n                <textarea id=\"text\" rows=\"20\" v-model=\"commentText\"></textarea>\n            </div>\n            <div class=\"error\">{{error}}</div>\n            <div>\n                <input :disabled=\"addingComment\" type=\"submit\" value=\"Add\"/>\n            </div>\n\n        </form>\n\n        <div v-if=\"renderComments\" class=\"comments\">\n            <h3 v-if=\"comments.length\">Comments: </h3>\n            <Comment v-for=\"comment in comments\" :key=\"comment.id\"\n                     :comment=\"comment\"></Comment>\n        </div>\n    </div>\n</template>\n\n<script>\n    import MiddlePost from \"./MiddlePost\";\n    import Comment from \"../common/Comment\";\n    import axios from 'axios'\n\n    export default {\n        name: \"FullPost\",\n        components: {\n            MiddlePost,\n            Comment\n        },\n        props: ['post', 'user'],\n        data: function () {\n            return {\n                renderComments: true,\n                addingComment: false,\n                commentText: \"\",\n                comments: []\n            }\n        },\n        methods: {\n            onAddComment: function () {\n                this.addingComment = true;\n\n                axios.post(\"/api/1/post/\" + this.post.id, {\n                    text: this.commentText,\n                }).then(\n                    this.getComments\n                ).then(this.hideComments).then(this.showComments);\n\n                this.addingComment = false;\n                this.commentText = \"\";\n            },\n            hideComments() {\n                this.renderComments = false;\n            },\n            showComments() {\n                this.$nextTick(() => {\n                    this.renderComments = true;\n                });\n            },\n            getComments() {\n                axios.get(\"/api/1/comments/\" + this.post.id).then(\n                    response => {\n                        this.comments = response.data;\n                    }\n                );\n            }\n        },\n        beforeMount() {\n            this.getComments();\n        }\n    }\n</script>\n\n<style scoped>\n    h3 {\n        color: #3B5998;\n    }\n\n    .comment-form textarea {\n        width: 15rem;\n        height: 2rem;\n    }\n</style>\n"]}]}